import{g as e}from"./p-7cf930c5.js";const t=/@import.*?["']([^"']+)["'].*?;/g;let n,o={},s={};function l(e){return new Promise((t,n)=>{fetch(e).then(e=>{if(e.ok)return t(e.text());n({url:e.url,status:e.status,statusText:e.statusText})})})}function c(){let c=e=>{let t={};e.addEventListener("styleExists",n=>{n.stopImmediatePropagation(),n.preventDefault();let o=n.detail.componentTag;(0,n.detail.callback)(void 0,t.hasOwnProperty(o),e),t[o]||(t[o]=!0)}),e.addEventListener("componentWasRemoved",e=>{let n=e.detail.componentTag;t[n]&&delete t[n]})};return c(document.querySelector("body")),i=>{const{componentWillLoad:r,disconnectedCallback:m}=i;i.componentWillLoad=function(){const i=e(this);if(i){let e=e=>{let n=i.tagName.toLowerCase(),m=c=>new Promise(i=>{let m=window.basePath+"themes/"+e+"/components/"+n+"/"+n+".css";o[m]||(o[m]=new Promise((e,t)=>{l(m).then(t=>{e(t)}).catch(t)})),o[m].then(e=>{var n,i;(n=m,i=e,s[n]||(s[n]=new Promise((e,n)=>{t.exec(i)?i.replace(t,(t,s)=>{o[s]||(o[s]=l(s)),o[s].then(n=>{e(i.replace(t,n))}).catch(n)}):e(i)})),s[n]).then(e=>{let t=document.createElement("style");t.innerHTML=e,c.append(t)})}).catch(e=>{console.log(`Request on resource ${e.url} ended with status: ${e.status} (${e.statusText})`)}).finally(()=>{i(r&&r.call(this))})});return i.shadowRoot?(c(i),m(i.shadowRoot)):new Promise(i.isConnected?e=>{let t=function e(t,n){return!!n&&(n.shadowRoot?t.parentNode===n.shadowRoot.host:e(n,n.parentElement))}(i,i.parentElement);i.isSlotted=t;let o=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(n,o,s)=>{n?console.log(n):o?e(r&&r.call(this)):(t||(s=s.shadowRoot),m(s).then(()=>{e()}))},componentTag:t?"SLOTTED:"+n:n}});i.dispatchEvent(o)}:e=>{e(r&&r.call(this))})};return n?e(n):new Promise(t=>{let o=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(o,s)=>{if(o)return console.log(o);n=s,e(n).then(()=>{t()})}});i.dispatchEvent(o)})}return r&&r.call(this)},i.disconnectedCallback=function(){const t=e(this);let n=t.tagName.toLowerCase();t.isSlotted&&(n="SLOTTED:"+n);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:n}});t.dispatchEvent(o),m&&m.call(this)}}}export{c as C}